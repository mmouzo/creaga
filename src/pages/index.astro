---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import TableOfContents from '../components/TableOfContents.astro';
import Section from '../components/Section.astro';
import Card from '../components/Card.astro';
import Logo from '../components/Logo.astro';
import BreedGallery from '../components/BreedGallery.astro';
import DesignEvolution from '../components/DesignEvolution.astro';
import InteractiveChart from '../components/InteractiveChart.astro';
import Accordion from '../components/Accordion.astro';
import AnimatedSection from '../components/AnimatedSection.astro';
import ScrollAnimations from '../components/ScrollAnimations.astro';
---

<Layout title="CRIAGA - Centro de Cría de Razas Galegas">
  <Navigation />
  <TableOfContents />
  <ScrollAnimations />
  
  <main class="container mx-auto px-6 py-12 max-w-7xl">
    
    <!-- Hero Section with Background Logo -->
    <section class="hero-section relative text-center mb-24 py-20 overflow-hidden">
      <!-- Background Logo -->
      <div class="absolute inset-0 flex items-center justify-center opacity-5 z-0">
        <img 
          src="/images/image127.png" 
          alt="CRIAGA Logo Background" 
          class="w-96 h-96 object-contain hero-bg"
          loading="eager"
        />
      </div>
      
      <!-- Content with higher z-index -->
      <div class="relative z-10 max-w-4xl mx-auto">
        <AnimatedSection animation="fadeIn">
          <h1 class="text-6xl md:text-7xl font-bold font-serif text-criaga-red mb-4 relative z-20">
            CRIAGA
          </h1>
          <h2 class="text-2xl md:text-3xl font-semibold text-criaga-gray mb-8 relative z-20">
            Centro de Cría de Razas Galegas
          </h2>
        </AnimatedSection>
        
        <AnimatedSection animation="slideUp" delay={0.3}>
          <p class="text-xl md:text-2xl text-gray-600 mb-8 relative z-20">
            Un proyecto innovador para investigar una nueva ruralidad
          </p>
        </AnimatedSection>
        
        
        <AnimatedSection animation="scale" delay={0.9}>
          <div class="flex flex-wrap justify-center gap-4 relative z-20">
            <a 
              href="#vision" 
              class="bg-criaga-red text-white px-8 py-3 rounded-lg font-semibold hover:bg-criaga-red-light transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1"
            >
              Explorar Proyecto
            </a>
            <a 
              href="#entorno" 
              class="border-2 border-criaga-red text-criaga-red px-8 py-3 rounded-lg font-semibold hover:bg-criaga-red hover:text-white transition-all duration-300"
            >
              Conocer Más
            </a>
          </div>
        </AnimatedSection>
      </div>
    </section>

    <!-- Section 1: Visión General -->
    <Section 
      id="vision" 
      title="Visión General del Proyecto"
      subtitle="CRIAGA representa una nueva ruralidad que integra ganadería ecológica, conservación del patrimonio y revitalización comunitaria en el corazón de Galicia."
      className="reveal-section"
    >
      <!-- Introducción Expandida -->
      <div class="mb-16">
        <AnimatedSection animation="fadeIn">
          <div class="bg-gradient-to-br from-criaga-red/5 to-criaga-gray/5 rounded-2xl p-8 mb-12">
            <div class="grid md:grid-cols-2 gap-8 items-center">
              <div>
                <h3 class="text-2xl font-bold font-serif text-criaga-red mb-4">
                  Una Propuesta Integral para el Rural Gallego
                </h3>
                <p class="text-gray-700 leading-relaxed mb-4">
                  CRIAGA (Centro de Cría de Razas Galegas) surge como respuesta a la necesidad de 
                  investigar nuevas formas de ruralidad que honren la tradición mientras abrazan 
                  la innovación sostenible.
                </p>
                <p class="text-gray-700 leading-relaxed">
                  Ubicado en el lugar de Lusquiños, parroquia de Tomeza, Pontevedra, este proyecto 
                  busca ser un catalizador para la puesta en valor de terrenos de pasto y cultivo, 
                  actuando como anclaje con la comunidad existente.
                </p>
              </div>
              <div class="relative">
                <img 
                  src="/images/image129.png" 
                  alt="Render del proyecto CRIAGA" 
                  class="w-full rounded-xl shadow-lg" 
                  loading="lazy"
                >
              </div>
            </div>
          </div>
        </AnimatedSection>
      </div>

      <!-- Objetivos Principales -->
      <div class="mb-16">
        <AnimatedSection animation="slideUp">
          <h3 class="text-2xl font-bold font-serif text-criaga-red mb-8 text-center">
            Objetivos del Proyecto
          </h3>
          <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="text-center p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300">
              <div class="w-16 h-16 bg-criaga-red/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-criaga-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
              </div>
              <h4 class="font-bold text-criaga-red mb-2">Conservación</h4>
              <p class="text-sm text-gray-600">Preservar razas autóctonas gallegas mediante ganadería ecológica</p>
            </div>
            
            <div class="text-center p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300">
              <div class="w-16 h-16 bg-criaga-red/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-criaga-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                </svg>
              </div>
              <h4 class="font-bold text-criaga-red mb-2">Comunidad</h4>
              <p class="text-sm text-gray-600">Revitalizar el tejido social rural y crear espacios de encuentro</p>
            </div>
            
            <div class="text-center p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300">
              <div class="w-16 h-16 bg-criaga-red/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-criaga-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
              </div>
              <h4 class="font-bold text-criaga-red mb-2">Educación</h4>
              <p class="text-sm text-gray-600">Divulgar conocimiento sobre ganadería sostenible y patrimonio rural</p>
            </div>
            
            <div class="text-center p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300">
              <div class="w-16 h-16 bg-criaga-red/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-criaga-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
                </svg>
              </div>
              <h4 class="font-bold text-criaga-red mb-2">Sostenibilidad</h4>
              <p class="text-sm text-gray-600">Promover prácticas agrícolas y ganaderas respetuosas con el medio</p>
            </div>
          </div>
        </AnimatedSection>
      </div>

      <!-- Componentes del Proyecto -->
      <div class="mb-16">
        <AnimatedSection animation="fadeIn">
          <h3 class="text-2xl font-bold font-serif text-criaga-red mb-8 text-center">
            Componentes del Proyecto
          </h3>
        </AnimatedSection>
        
        <div class="grid md:grid-cols-3 gap-8 cards-container">
          <Card title="Centro de Cría de Ganado" className="animate-card">
            <div class="mb-4 bg-gray-50 rounded-lg overflow-hidden">
              <img 
                src="/images/image103.png" 
                alt="Raza bovina Cachena - Característica por su pequeño tamaño y pelaje castaño" 
                class="w-full h-40 object-contain rounded-lg mb-4" 
                loading="lazy"
                width="400"
                height="160"
              >
            </div>
            <div class="space-y-3">
              <p class="text-gray-700 leading-relaxed font-medium">
                <strong class="text-criaga-red">Ganadería Ecológica Extensiva</strong>
              </p>
              <p class="text-gray-600 leading-relaxed text-sm">
                Cría de las seis razas bovinas autóctonas gallegas: Cachena, Caldelá, Frieiresa, Limiá, Rubia Galega y Vianesa, 
                junto con Cabra Gallega, Oveja Gallega y Gallina de Mos.
              </p>
              <ul class="text-gray-600 text-sm space-y-1">
                <li>• Producción ligada al suelo y pastos naturales</li>
                <li>• Bienestar animal como prioridad</li>
                <li>• Aprovechamiento de recursos del entorno</li>
                <li>• Superficie total: 190.388 m²</li>
              </ul>
            </div>
          </Card>
          
          <Card title="Vivienda y Plaza Comunitaria" className="animate-card">
            <div class="mb-4 bg-gray-50 rounded-lg overflow-hidden">
              <img 
                src="/images/image13.png" 
                alt="Vista de la vivienda" 
                class="w-full h-40 object-contain rounded-lg mb-4" 
                loading="lazy"
                width="400"
                height="160"
              >
            </div>
            <div class="space-y-3">
              <p class="text-gray-700 leading-relaxed font-medium">
                <strong class="text-criaga-red">Anclaje con la Comunidad</strong>
              </p>
              <p class="text-gray-600 leading-relaxed text-sm">
                Rehabilitación y ampliación de construcción preexistente para crear un punto de encuentro vecinal.
              </p>
              <ul class="text-gray-600 text-sm space-y-1">
                <li>• Vivienda para encargados de la granja</li>
                <li>• Plaza pública con emparrado para sombra</li>
                <li>• Área de descanso para peregrinos del Camino de Santiago</li>
                <li>• Huerto de frutales para autoabastecimiento</li>
              </ul>
            </div>
          </Card>
          
          <Card title="Centro de Interpretación" className="animate-card">
            <div class="mb-4 bg-gray-50 rounded-lg overflow-hidden">
              <img 
                src="/images/image14.png" 
                alt="Centro de visitantes" 
                class="w-full h-40 object-contain rounded-lg mb-4" 
                loading="lazy"
                width="400"
                height="160"
              >
            </div>
            <div class="space-y-3">
              <p class="text-gray-700 leading-relaxed font-medium">
                <strong class="text-criaga-red">Divulgación y Formación</strong>
              </p>
              <p class="text-gray-600 leading-relaxed text-sm">
                Espacios dedicados a la divulgación, formación y exposición de las actividades agropecuarias.
              </p>
              <ul class="text-gray-600 text-sm space-y-1">
                <li>• Salas de exposición y formación</li>
                <li>• Bodega para viticultura experimental</li>
                <li>• Variedades Caiño Blanco y Tinto</li>
                <li>• Actividades educativas y culturales</li>
              </ul>
            </div>
          </Card>
        </div>
      </div>

      <!-- Innovación en Ganadería Ecológica -->
      <div class="mb-16">
        <AnimatedSection animation="slideUp">
          <div class="bg-white rounded-2xl p-8 shadow-lg">
            <h3 class="text-2xl font-bold font-serif text-criaga-red mb-6 text-center">
              Principios de la Ganadería Ecológica
            </h3>
            <div class="grid md:grid-cols-2 gap-8">
              <div>
                <h4 class="text-lg font-semibold text-criaga-gray mb-4">Fundamentos Técnicos</h4>
                <ul class="space-y-2 text-gray-600">
                  <li class="flex items-start">
                    <span class="text-criaga-red mr-2">•</span>
                    Producción ligada al suelo con tierras de pasto y cultivo propias
                  </li>
                  <li class="flex items-start">
                    <span class="text-criaga-red mr-2">•</span>
                    Uso de razas autóctonas adaptadas al entorno gallego
                  </li>
                  <li class="flex items-start">
                    <span class="text-criaga-red mr-2">•</span>
                    Alimentación ecológica producida en la misma unidad
                  </li>
                  <li class="flex items-start">
                    <span class="text-criaga-red mr-2">•</span>
                    Maximización del uso de pastos naturales
                  </li>
                </ul>
              </div>
              <div>
                <h4 class="text-lg font-semibold text-criaga-gray mb-4">Bienestar Animal</h4>
                <ul class="space-y-2 text-gray-600">
                  <li class="flex items-start">
                    <span class="text-criaga-red mr-2">•</span>
                    Animales en libertad con acceso permanente a pastos
                  </li>
                  <li class="flex items-start">
                    <span class="text-criaga-red mr-2">•</span>
                    Reproducción por métodos naturales
                  </li>
                  <li class="flex items-start">
                    <span class="text-criaga-red mr-2">•</span>
                    Prevención de enfermedades mediante manejo adecuado
                  </li>
                  <li class="flex items-start">
                    <span class="text-criaga-red mr-2">•</span>
                    Espacios suficientes según normativa ecológica
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </AnimatedSection>
      </div>

      <!-- Impacto Territorial -->
      <div class="mb-12">
        <AnimatedSection animation="fadeIn">
          <div class="bg-gradient-to-r from-criaga-red/10 to-criaga-gray/10 rounded-2xl p-8">
            <h3 class="text-2xl font-bold font-serif text-criaga-red mb-6 text-center">
              Impacto en el Territorio
            </h3>
            <div class="grid md:grid-cols-3 gap-6 text-center">
              <div>
                <div class="text-3xl font-bold text-criaga-red mb-2">190.388 m²</div>
                <div class="text-gray-600">Superficie total del proyecto</div>
              </div>
              <div>
                <div class="text-3xl font-bold text-criaga-red mb-2">6 + 3</div>
                <div class="text-gray-600">Razas de ganado (vacas + otras especies)</div>
              </div>
              <div>
                <div class="text-3xl font-bold text-criaga-red mb-2">100%</div>
                <div class="text-gray-600">Ganadería ecológica certificada</div>
              </div>
            </div>
          </div>
        </AnimatedSection>
      </div>
    </Section>

    <!-- Section 2: Análisis del Entorno -->
    <Section 
      id="entorno" 
      title="Análisis del Entorno"
      subtitle="El diseño de CRIAGA nace de un profundo análisis del territorio. Se busca recuperar elementos perdidos y potenciar los existentes para revitalizar el núcleo rural de Lusquiños."
      className="reveal-section"
    >
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        <AnimatedSection animation="slideUp" delay={0}>
          <Card className="text-center h-full">
            <div class="mb-4">
              <div class="w-16 h-16 bg-criaga-red/10 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-criaga-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path>
                </svg>
              </div>
              <h4 class="text-lg font-bold font-serif text-criaga-red mb-2">Caminos</h4>
            </div>
            <p class="text-gray-600 text-sm leading-relaxed">
              Recuperación de la red parroquial histórica de caminos, generando conexiones peatonales 
              seguras y rutas para el ganado que revitalicen los lugares de encuentro vecinal.
            </p>
          </Card>
        </AnimatedSection>
        
        <AnimatedSection animation="slideUp" delay={0.1}>
          <Card className="text-center h-full">
            <div class="mb-4">
              <div class="w-16 h-16 bg-criaga-red/10 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-criaga-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                </svg>
              </div>
              <h4 class="text-lg font-bold font-serif text-criaga-red mb-2">Emparrados</h4>
            </div>
            <p class="text-gray-600 text-sm leading-relaxed">
              Reactivación de la viticultura tradicional mediante la plantación de viñedos (emparrados), 
              coexistiendo con la ganadería y recuperando un elemento cultural en desuso.
            </p>
          </Card>
        </AnimatedSection>
        
        <AnimatedSection animation="slideUp" delay={0.2}>
          <Card className="text-center h-full">
            <div class="mb-4">
              <div class="w-16 h-16 bg-criaga-red/10 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-criaga-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path>
                </svg>
              </div>
              <h4 class="text-lg font-bold font-serif text-criaga-red mb-2">Monte Comunal</h4>
            </div>
            <p class="text-gray-600 text-sm leading-relaxed">
              Puesta en valor del monte comunal como un elemento productivo a través del pastoreo, 
              la limpieza de especies invasoras y la reforestación, previniendo incendios.
            </p>
          </Card>
        </AnimatedSection>
        
        <AnimatedSection animation="slideUp" delay={0.3}>
          <Card className="text-center h-full">
            <div class="mb-4">
              <div class="w-16 h-16 bg-criaga-red/10 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-criaga-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293H15M9 10v4a2 2 0 002 2h2a2 2 0 002-2v-4M9 10V9a2 2 0 012-2h2a2 2 0 012 2v1"></path>
                </svg>
              </div>
              <h4 class="text-lg font-bold font-serif text-criaga-red mb-2">Río Gafos</h4>
            </div>
            <p class="text-gray-600 text-sm leading-relaxed">
              Respeto por el espacio fluvial, manteniendo el proyecto alejado del cauce para prevenir 
              problemas futuros y permitir que la naturaleza actúe como corredor ecológico.
            </p>
          </Card>
        </AnimatedSection>
      </div>
    </Section>

    <!-- Section 3: Programa Ganadero -->
    <Section 
      id="programa" 
      title="Programa Ganadero y de Espacios"
      subtitle="El programa se dimensiona para cumplir con los requisitos de la ganadería ecológica, primando el bienestar de las razas autóctonas y el aprovechamiento sostenible del entorno."
    >
      <AnimatedSection animation="fadeIn">
        <BreedGallery />
      </AnimatedSection>
    </Section>

    <!-- Section 4: Diseño Arquitectónico -->
    <Section 
      id="diseno" 
      title="Evolución del Diseño Arquitectónico"
      subtitle="La arquitectura del proyecto busca una integración total con el entorno. La granja se concibe como un elemento que conecta la zona baja de pastos con el monte, fusionándose con la topografía."
    >
      <AnimatedSection animation="slideUp">
        <DesignEvolution />
      </AnimatedSection>
    </Section>

    <!-- Section 5: Análisis Técnico y Económico -->
    <Section 
      id="analisis" 
      title="Análisis Técnico y Económico"
      subtitle="El proyecto se fundamenta en un riguroso análisis técnico, cumpliendo con toda la normativa vigente, y se define con un presupuesto detallado que asegura su viabilidad."
      className="progress-section"
    >
      <!-- Resumen Económico Principal -->
      <AnimatedSection animation="fadeIn">
        <Card title="Resumen Económico del Proyecto" className="text-center mb-12">
          <div class="grid md:grid-cols-3 gap-8 mb-8">
            <div class="text-center">
              <div class="text-4xl font-bold text-criaga-red mb-2 counter" data-target="3087245">
                3.087.245,68 €
              </div>
              <div class="text-sm uppercase tracking-wider text-gray-500">Ejecución Material</div>
            </div>
            <div class="text-center">
              <div class="text-4xl font-bold text-criaga-red mb-2 counter" data-target="4594747">
                4.594.747,74 €
              </div>
              <div class="text-sm uppercase tracking-wider text-gray-500">Presupuesto Total (IVA inc.)</div>
            </div>
            <div class="text-center">
              <div class="text-4xl font-bold text-criaga-red mb-2">
                36.688,57 m²
              </div>
              <div class="text-sm uppercase tracking-wider text-gray-500">Superficie Total</div>
            </div>
          </div>
          <div class="text-center">
            <div class="inline-block px-6 py-3 bg-criaga-red/10 rounded-lg">
              <span class="text-lg font-medium text-criaga-red">Coste por m²: 125,23 €/m²</span>
            </div>
          </div>
        </Card>
      </AnimatedSection>

      <div class="grid lg:grid-cols-2 gap-12 items-start">
        <!-- Distribución del Presupuesto -->
        <AnimatedSection animation="slideLeft">
          <Card title="Distribución del Presupuesto por Capítulos">
            <InteractiveChart
              id="budgetChart"
              type="doughnut"
              data={{
                labels: ['Acond. Terreno', 'Estructuras', 'Urbanización', 'Instalaciones', 'Cimentaciones', 'Cubiertas', 'Aislamientos', 'Carpinterías', 'Otros'],
                datasets: [{
                  label: 'Distribución del Presupuesto',
                  data: [27.42, 22.28, 14.21, 12.27, 9.70, 5.80, 2.94, 3.37, 2.01],
                  backgroundColor: ['#8C1D18', '#A6231D', '#BF4A3F', '#D97566', '#F2A499', '#E5A584', '#E5B384', '#E5C284', '#E5E5E5'],
                  borderColor: '#FCFBF8',
                  borderWidth: 3,
                  hoverOffset: 12,
                  // Datos adicionales para tooltips detallados
                  detailedInfo: [
                    { description: 'Movimiento de tierras y preparación del terreno', cost: 8464.02, unit: '€' },
                    { description: 'Estructuras principales de hormigón y acero', cost: 6878.63, unit: '€' },
                    { description: 'Viales, senderos y áreas de acceso', cost: 4386.79, unit: '€' },
                    { description: 'Electricidad, fontanería y sistemas técnicos', cost: 3788.02, unit: '€' },
                    { description: 'Cimentaciones y zapatas de estructuras', cost: 2994.62, unit: '€' },
                    { description: 'Cubiertas y sistemas de impermeabilización', cost: 1790.58, unit: '€' },
                    { description: 'Aislamientos térmicos y acústicos', cost: 907.65, unit: '€' },
                    { description: 'Ventanas, puertas y elementos de cierre', cost: 1040.40, unit: '€' },
                    { description: 'Partidas menores y varios', cost: 620.41, unit: '€' }
                  ]
                }]
              }}
              options={{
                plugins: {
                  legend: {
                    position: 'bottom',
                    labels: {
                      padding: 20,
                      usePointStyle: true,
                      pointStyle: 'circle'
                    }
                  },
                  tooltip: {
                    callbacks: {
                      title: (context: any) => {
                        const dataIndex = context[0].dataIndex;
                        return `${context[0].label} - ${context[0].parsed}%`;
                      },
                      label: function(context: any) {
                        console.log('🚀 DOUGHNUT TOOLTIP TRIGGERED:', context);
                        const cost = (context.parsed * 30872.46 / 100).toFixed(0);
                        return `TEST: ${context.label} - ${context.parsed}% (${cost} €)`;
                      },
                      afterLabel: (context: any) => {
                        const dataIndex = context.dataIndex;
                        const detailedInfo = context.dataset.detailedInfo[dataIndex];
                        const m2Cost = (detailedInfo.cost / 246.63).toFixed(2); // €/m² basado en superficie total
                        
                        return [
                          '',
                          `📋 ${detailedInfo.description}`,
                          '',
                          `� Coste por m²: ${m2Cost} €/m²`,
                          `📊 ${context.parsed}% del presupuesto total`,
                          '',
                          `🏗️ Proyecto CRIAGA - Centro de Recuperación`,
                          `🌲 Enfoque en sostenibilidad y biodiversidad`
                        ];
                      }
                    }
                  }
                },
                interaction: {
                  intersect: false,
                  mode: 'nearest'
                }
              }}
              height={350}
             
            />
          </Card>
        </AnimatedSection>

        <!-- Distribución de Superficies -->
        <AnimatedSection animation="slideRight">
          <Card title="Distribución de Superficies del Proyecto">
            <InteractiveChart
              id="superficiesChart"
              type="bar"
              data={{
                labels: ['Carballeira', 'Viñedos', 'Zona Ext. Vacas', 'Granja', 'Eira', 'Caminos', 'Cultivos', 'Invernaderos'],
                datasets: [{
                  label: 'Superficie (m²)',
                  data: [12359.98, 4993.75, 4181.67, 2989.32, 2287.89, 1511.95, 1449.79, 432.00],
                  backgroundColor: ['#8C1D18', '#A6231D', '#BF4A3F', '#D97566', '#F2A499', '#E5A584', '#E5B384', '#E5C284'],
                  borderColor: '#8C1D18',
                  borderWidth: 1
                }]
              }}
              options={{
                indexAxis: 'y',
                plugins: {
                  legend: { display: false }
                },
                scales: {
                  x: {
                    beginAtZero: true,
                    title: {
                      display: true,
                      text: 'Superficie (m²)'
                    }
                  }
                }
              }}
              height={350}
             
            />
          </Card>
        </AnimatedSection>
      </div>

      <!-- Análisis Comparativo -->
      <div class="grid lg:grid-cols-2 gap-12 mt-12">
        <!-- Desglose de Costes por Área -->
        <AnimatedSection animation="slideUp" delay={0.2}>
          <Card title="Análisis de Costes por Área Funcional">
            <InteractiveChart
              id="costAreasChart"
              type="pie"
              data={{
                labels: ['Infraestructura', 'Edificaciones', 'Paisajismo', 'Instalaciones', 'Acabados'],
                datasets: [{
                  label: 'Coste por Área',
                  data: [41.63, 28.08, 14.21, 12.27, 3.81],
                  backgroundColor: ['#8C1D18', '#A6231D', '#BF4A3F', '#D97566', '#F2A499'],
                  borderColor: '#FCFBF8',
                  borderWidth: 2,
                  hoverOffset: 10,
                  // Datos adicionales para tooltips detallados
                  detailedInfo: [
                    { 
                      description: 'Acondicionamiento de terreno, cimentaciones y estructuras básicas',
                      items: ['Movimiento de tierras', 'Cimentaciones', 'Estructuras principales'],
                      cost: 12848.27,
                      unit: '€'
                    },
                    { 
                      description: 'Construcción de edificaciones y estructuras complementarias',
                      items: ['Estructuras de hormigón', 'Cubiertas', 'Carpinterías'],
                      cost: 8668.21,
                      unit: '€'
                    },
                    { 
                      description: 'Urbanización y ordenación paisajística del entorno',
                      items: ['Viales y senderos', 'Jardinería', 'Mobiliario urbano'],
                      cost: 4386.79,
                      unit: '€'
                    },
                    { 
                      description: 'Instalaciones técnicas y sistemas de servicios',
                      items: ['Electricidad', 'Fontanería', 'Telecomunicaciones'],
                      cost: 3788.02,
                      unit: '€'
                    },
                    { 
                      description: 'Acabados finales y elementos decorativos',
                      items: ['Aislamientos', 'Revestimientos', 'Detalles finales'],
                      cost: 1176.46,
                      unit: '€'
                    }
                  ]
                }]
              }}
              options={{
                plugins: {
                  legend: {
                    position: 'right',
                    labels: {
                      padding: 25,
                      usePointStyle: true,
                      pointStyle: 'rectRounded',
                      font: {
                        size: 13
                      }
                    }
                  },
                  tooltip: {
                    callbacks: {
                      title: (context: any) => {
                        return `🏗️ ${context[0].label}`;
                      },
                      label: (context: any) => {
                        const cost = context.dataset.detailedInfo[context.dataIndex].cost;
                        return `💰 Coste: ${cost.toLocaleString('es-ES')} € (${context.parsed}%)`;
                      },
                      afterLabel: (context: any) => {
                        const dataIndex = context.dataIndex;
                        const detailedInfo = context.dataset.detailedInfo[dataIndex];
                        const impactInfo = [
                          '🌱 Contribución sostenible',
                          '♻️ Materiales reciclables', 
                          '🌿 Integración paisajística',
                          '⚡ Eficiencia energética',
                          '✨ Acabados ecológicos'
                        ];
                        
                        const lines = [
                          '',
                          `📝 ${detailedInfo.description}`,
                          ''
                        ];
                        
                        // Añadir elementos incluidos
                        lines.push('🔧 Incluye:');
                        detailedInfo.items.forEach((item: string) => {
                          lines.push(`   • ${item}`);
                        });
                        
                        lines.push('');
                        lines.push(`${impactInfo[dataIndex]}`);
                        lines.push(`📊 ${context.parsed}% del coste total del proyecto`);
                        
                        return lines;
                      },
                      footer: () => {
                        return [
                          'Presupuesto total: 30.872,46 €',
                          'Superficie: 246,63 m² | Coste/m²: 125,23 €'
                        ];
                      }
                    }
                  }
                },
                interaction: {
                  intersect: false,
                  mode: 'nearest'
                }
              }}
              height={300}
             
            />
          </Card>
        </AnimatedSection>

        <!-- Timeline de Inversión -->
        <AnimatedSection animation="slideUp" delay={0.4}>
          <Card title="Cronograma de Inversión Estimado">
            <InteractiveChart
              id="timelineChart"
              type="line"
              data={{
                labels: ['Mes 1-3', 'Mes 4-6', 'Mes 7-9', 'Mes 10-12', 'Mes 13-15', 'Mes 16-18'],
                datasets: [{
                  label: 'Inversión Acumulada (%)',
                  data: [15, 35, 55, 75, 90, 100],
                  borderColor: '#8C1D18',
                  backgroundColor: 'rgba(140, 29, 24, 0.1)',
                  borderWidth: 3,
                  fill: true,
                  tension: 0.4
                }]
              }}
              options={{
                plugins: {
                  legend: { display: false }
                },
                scales: {
                  y: {
                    beginAtZero: true,
                    max: 100,
                    title: {
                      display: true,
                      text: 'Porcentaje de Inversión (%)'
                    }
                  },
                  x: {
                    title: {
                      display: true,
                      text: 'Fase del Proyecto'
                    }
                  }
                }
              }}
              height={300}
             
            />
          </Card>
        </AnimatedSection>
      </div>

      <!-- Datos Técnicos Clave -->
      <div class="grid lg:grid-cols-2 gap-12 mt-12">
        <AnimatedSection animation="slideLeft" delay={0.2}>
          <Card title="Datos Clave de la Estructura">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
              <div class="bg-gray-50 p-3 rounded-lg">
                <strong class="text-criaga-red">Cimentación:</strong><br>
                Zapatas corridas
              </div>
              <div class="bg-gray-50 p-3 rounded-lg">
                <strong class="text-criaga-red">Hormigón Muros:</strong><br>
                HA-30/F/12/XC4
              </div>
              <div class="bg-gray-50 p-3 rounded-lg">
                <strong class="text-criaga-red">Acero:</strong><br>
                B 500 S
              </div>
              <div class="bg-gray-50 p-3 rounded-lg">
                <strong class="text-criaga-red">Cubierta:</strong><br>
                Losa maciza H.A. 35 cm
              </div>
              <div class="bg-gray-50 p-3 rounded-lg">
                <strong class="text-criaga-red">Acción Viento:</strong><br>
                0.45 kN/m²
              </div>
              <div class="bg-gray-50 p-3 rounded-lg">
                <strong class="text-criaga-red">Acción Nieve:</strong><br>
                0.3 kN/m²
              </div>
            </div>
          </Card>
        </AnimatedSection>
        
        <AnimatedSection animation="slideRight" delay={0.4}>
          <Card title="Indicadores de Sostenibilidad">
            <div class="space-y-4">
              <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                <span class="font-medium">Superficie Vegetal</span>
                <span class="text-green-600 font-bold">67.2%</span>
              </div>
              <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                <span class="font-medium">Gestión de Residuos</span>
                <span class="text-blue-600 font-bold">0.22%</span>
              </div>
              <div class="flex justify-between items-center p-3 bg-orange-50 rounded-lg">
                <span class="font-medium">Eficiencia Energética</span>
                <span class="text-orange-600 font-bold">A+</span>
              </div>
              <div class="flex justify-between items-center p-3 bg-purple-50 rounded-lg">
                <span class="font-medium">Ratio m²/Animal</span>
                <span class="text-purple-600 font-bold">150 m²</span>
              </div>
            </div>
          </Card>
        </AnimatedSection>
      </div>
      
      <!-- Normativa y Cumplimiento -->
      <div class="mt-12">
        <AnimatedSection animation="fadeIn" delay={0.6}>
          <Card title="Cumplimiento Normativo (CTE)">
            <Accordion 
             
              items={[
                {
                  id: 'db-si',
                  title: 'DB-SI: Seguridad en caso de Incendio',
                  content: 'El proyecto cumple con las exigencias del DB-SI, considerando la granja un espacio exterior abierto. Se definen sectores de incendio para zonas cerradas como la sala de control (Riesgo Bajo). Se dota de extintores, B.I.E., hidrantes y sistema de detección y alarma. La estructura principal (muros y losa de hormigón) garantiza una resistencia al fuego R-90.'
                },
                {
                  id: 'db-sua',
                  title: 'DB-SUA: Seguridad de Utilización y Accesibilidad',
                  content: 'Se garantiza la seguridad frente a caídas con pavimentos de clase 3 (Rd>45). Los desniveles se resuelven con rampas de pendiente controlada (<12%). Aunque no es de obligado cumplimiento por el uso agrario, el diseño de la planta baja es accesible. Se instala un sistema de protección contra el rayo de Nivel 3.'
                },
                {
                  id: 'db-hs',
                  title: 'DB-HS: Salubridad',
                  content: 'Se asegura la protección frente a la humedad en muros y soleras en contacto con el terreno, y en la cubierta vegetal. La ventilación es principalmente natural. Se proyecta una red de saneamiento para purines con tratamiento y depuración por lagunaje, y una red separada para el aseo. El edificio se considera exento de cumplir la protección frente al radón por su condición de espacio abierto.'
                },
                {
                  id: 'db-he',
                  title: 'DB-HE: Ahorro de Energía',
                  content: 'El proyecto está exento de cumplir las exigencias de limitación de consumo (HE0, HE1, HE2) por ser un edificio agrícola de baja demanda energética. No obstante, el diseño bioclimático (cubierta vegetal, ventilación natural) contribuye a un uso racional de la energía.'
                }
              ]}
            />
          </Card>
        </AnimatedSection>
      </div>
    </Section>

    <!-- Section 6: Pliego de Condiciones -->
    <Section 
      id="pliego" 
      title="Pliego de Condiciones"
      subtitle="Seleccione una unidad de obra para consultar sus especificaciones técnicas, normativa de aplicación y proceso de ejecución detallado."
    >
      <AnimatedSection animation="fadeIn">
        <div class="flex flex-wrap justify-center gap-4 mb-8">
          <button class="pliego-btn bg-criaga-red text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:bg-criaga-red-light transition-all duration-200 transform hover:-translate-y-1" data-target="muro">
            Muro de Hormigón
          </button>
          <button class="pliego-btn bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-all duration-200 transform hover:-translate-y-1" data-target="viga">
            Viga de Hormigón
          </button>
          <button class="pliego-btn bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-all duration-200 transform hover:-translate-y-1" data-target="losa">
            Losa Maciza
          </button>
        </div>
        
        <Card className="min-h-[400px]">
          <div id="pliego-content">
            <!-- Content will be injected by JavaScript -->
          </div>
        </Card>
      </AnimatedSection>
    </Section>

  </main>

  <!-- Footer -->
  <footer class="bg-white border-t border-criaga-gray-light mt-24">
    <div class="container mx-auto px-6 py-12">
      <div class="grid md:grid-cols-3 gap-8">
        <div>
          <Logo size="md" className="mb-4" />
          <p class="text-gray-600 leading-relaxed">
            Un proyecto innovador para la revitalización del mundo rural gallego a través de la ganadería sostenible 
            y la puesta en valor de las razas autóctonas.
          </p>
        </div>
        <div>
          <h4 class="font-semibold text-criaga-red mb-4">Navegación</h4>
          <ul class="space-y-2 text-gray-600">
            <li><a href="#vision" class="hover:text-criaga-red transition-colors">Visión General</a></li>
            <li><a href="#programa" class="hover:text-criaga-red transition-colors">Programa Ganadero</a></li>
            <li><a href="#diseno" class="hover:text-criaga-red transition-colors">Diseño Arquitectónico</a></li>
            <li><a href="#analisis" class="hover:text-criaga-red transition-colors">Análisis Técnico</a></li>
            <li><a href="#pliego" class="hover:text-criaga-red transition-colors">Pliego Técnico</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold text-criaga-red mb-4">Información del Proyecto</h4>
          <p class="text-gray-600 text-sm leading-relaxed mb-4">
            Proyecto desarrollado por Pedro Citoula Pérez como Trabajo Fin de Máster.
          </p>
          <p class="text-gray-600 text-sm">
            Aplicación web interactiva para la exploración del proyecto CRIAGA.
          </p>
        </div>
      </div>
      <div class="border-t border-criaga-gray-light mt-8 pt-8 text-center text-gray-500">
        <p>&copy; 2025 Pedro Citoula Pérez - Proyecto CRIAGA</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Pliego functionality
      const pliegoData = {
        muro: {
          title: 'Unidad EHN030B: Muro de hormigón armado',
          content: `
            <p class="mb-4"><strong>Descripción:</strong> Muro de hormigón armado de 40 cm de espesor medio, realizado con hormigón HA-30/F/12/XC4 fabricado en central y vertido con cubilote. Armado con acero UNE-EN 10080 B 500 S (cuantía aprox. 51,4 kg/m³).</p>
            <p class="mb-4"><strong>Normativa:</strong> Elaboración, transporte y puesta en obra del hormigón según el Código Estructural.</p>
            <h4 class="font-semibold mb-2 text-criaga-red">Proceso de Ejecución:</h4>
            <ol class="list-decimal list-inside space-y-1 text-gray-700">
              <li>Replanteo y comprobación de armaduras de espera.</li>
              <li>Colocación de armadura principal con separadores homologados.</li>
              <li>Vertido y compactación del hormigón, evitando la disgregación.</li>
              <li>Curado del hormigón para garantizar la resistencia.</li>
            </ol>
          `
        },
        viga: {
          title: 'Unidad EHV030: Viga de hormigón armado',
          content: `
            <p class="mb-4"><strong>Descripción:</strong> Viga descolgada de hormigón armado, realizada con hormigón HA-25/F/20/X0 fabricado en central y vertido con cubilote. Armado con acero UNE-EN 10080 B 500 S (cuantía aprox. 112,7 kg/m³).</p>
            <p class="mb-4"><strong>Normativa:</strong> Código Estructural y NTE-EME (Encofrados).</p>
            <h4 class="font-semibold mb-2 text-criaga-red">Proceso de Ejecución:</h4>
            <ol class="list-decimal list-inside space-y-1 text-gray-700">
              <li>Montaje de sistema de encofrado con superficie tratada.</li>
              <li>Colocación de la armadura con separadores, asegurando recubrimientos.</li>
              <li>Vertido y compactación del hormigón.</li>
            </ol>
          `
        },
        losa: {
          title: 'Unidad EHL030: Losa maciza de hormigón armado',
          content: `
            <p class="mb-4"><strong>Descripción:</strong> Losa maciza horizontal de 35 cm de canto, realizada con hormigón HA-25/F/20/X0. Armado con acero UNE-EN 10080 B 500 S (cuantía aprox. 28,7 kg/m²).</p>
            <p class="mb-4"><strong>Normativa:</strong> Código Estructural y NTE-EME (Encofrados).</p>
            <h4 class="font-semibold mb-2 text-criaga-red">Proceso de Ejecución:</h4>
            <ol class="list-decimal list-inside space-y-1 text-gray-700">
              <li>Montaje de sistema de encofrado continuo sobre puntales.</li>
              <li>Colocación de armaduras (inferior, superior, de reparto) con separadores.</li>
              <li>Vertido continuo y compactación del hormigón.</li>
            </ol>
          `
        }
      };

      const pliegoButtons = document.querySelectorAll('.pliego-btn');
      const pliegoContent = document.getElementById('pliego-content');

      function updatePliegoContent(target: string) {
        if (pliegoContent && pliegoData[target as keyof typeof pliegoData]) {
          pliegoContent.innerHTML = `
            <h3 class="text-2xl font-bold font-serif text-criaga-red mb-6">${pliegoData[target as keyof typeof pliegoData].title}</h3>
            ${pliegoData[target as keyof typeof pliegoData].content}
          `;
        }
      }

      pliegoButtons.forEach(button => {
        button.addEventListener('click', () => {
          const target = button.getAttribute('data-target');
          if (target) {
            updatePliegoContent(target);
            
            // Update button styles with animation
            pliegoButtons.forEach(btn => {
              btn.classList.remove('bg-criaga-red', 'text-white');
              btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            button.classList.remove('bg-gray-200', 'text-gray-700');
            button.classList.add('bg-criaga-red', 'text-white');
          }
        });
      });

      // Initialize with first option
      updatePliegoContent('muro');

      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (this: HTMLAnchorElement, e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href') || '');
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
    });
  </script>
</Layout>